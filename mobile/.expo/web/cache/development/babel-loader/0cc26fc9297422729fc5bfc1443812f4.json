{"ast":null,"code":"function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport invariant from 'fbjs/lib/invariant';\nvar EventTypes = ['url'];\nvar listeners = [];\nexport default {\n  addEventListener(type, listener) {\n    invariant(EventTypes.indexOf(type) !== -1, \"Linking.addEventListener(): \".concat(type, \" is not a valid event\"));\n\n    var nativeListener = nativeEvent => listener({\n      url: window.location.href,\n      nativeEvent\n    });\n\n    listeners.push({\n      listener,\n      nativeListener\n    });\n    window.addEventListener('message', nativeListener, false);\n  },\n\n  removeEventListener(type, listener) {\n    invariant(EventTypes.indexOf(type) !== -1, \"Linking.removeEventListener(): \".concat(type, \" is not a valid event.\"));\n    var listenerIndex = listeners.findIndex(pair => pair.listener === listener);\n    invariant(listenerIndex !== -1, 'Linking.removeEventListener(): cannot remove an unregistered event listener.');\n    var nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  },\n\n  canOpenURL(url) {\n    return _asyncToGenerator(function* () {\n      return true;\n    })();\n  },\n\n  getInitialURL() {\n    return _asyncToGenerator(function* () {\n      if (!canUseDOM) return '';\n      return window.location.href;\n    })();\n  },\n\n  openURL(url) {\n    return _asyncToGenerator(function* () {\n      if (canUseDOM) {\n        window.location = new URL(url, window.location).toString();\n      }\n    })();\n  }\n\n};","map":{"version":3,"sources":["../src/ExpoLinking.web.ts"],"names":[],"mappings":";;;;AAAA,SAAS,SAAT,QAA0B,+BAA1B;AACA,OAAO,SAAP,MAAsB,oBAAtB;AAIA,IAAM,UAAU,GAAG,CAAC,KAAD,CAAnB;AAEA,IAAM,SAAS,GAAmE,EAAlF;AAEA,eAAe;AACb,EAAA,gBAAgB,CAAC,IAAD,EAAc,QAAd,EAAmC;AACjD,IAAA,SAAS,CACP,UAAU,CAAC,OAAX,CAAmB,IAAnB,MAA6B,CAAC,CADvB,wCAEwB,IAFxB,2BAAT;;AAIA,QAAM,cAAc,GAAsB,WAAW,IACnD,QAAQ,CAAC;AAAE,MAAA,GAAG,EAAE,MAAM,CAAC,QAAP,CAAgB,IAAvB;AAA6B,MAAA;AAA7B,KAAD,CADV;;AAEA,IAAA,SAAS,CAAC,IAAV,CAAe;AAAE,MAAA,QAAF;AAAY,MAAA;AAAZ,KAAf;AACA,IAAA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,cAAnC,EAAmD,KAAnD;AACD,GAVY;;AAYb,EAAA,mBAAmB,CAAC,IAAD,EAAc,QAAd,EAAmC;AACpD,IAAA,SAAS,CACP,UAAU,CAAC,OAAX,CAAmB,IAAnB,MAA6B,CAAC,CADvB,2CAE2B,IAF3B,4BAAT;AAIA,QAAM,aAAa,GAAG,SAAS,CAAC,SAAV,CAAoB,IAAI,IAAI,IAAI,CAAC,QAAL,KAAkB,QAA9C,CAAtB;AACA,IAAA,SAAS,CACP,aAAa,KAAK,CAAC,CADZ,EAEP,8EAFO,CAAT;AAIA,QAAM,cAAc,GAAG,SAAS,CAAC,aAAD,CAAT,CAAyB,cAAhD;AACA,IAAA,MAAM,CAAC,mBAAP,CAA2B,SAA3B,EAAsC,cAAtC,EAAsD,KAAtD;AACA,IAAA,SAAS,CAAC,MAAV,CAAiB,aAAjB,EAAgC,CAAhC;AACD,GAzBY;;AA2BP,EAAA,UAAN,CAAiB,GAAjB,EAA4B;AAAA;AAE1B,aAAO,IAAP;AAF0B;AAG3B,GA9BY;;AAgCP,EAAA,aAAN,GAAmB;AAAA;AACjB,UAAI,CAAC,SAAL,EAAgB,OAAO,EAAP;AAChB,aAAO,MAAM,CAAC,QAAP,CAAgB,IAAvB;AAFiB;AAGlB,GAnCY;;AAqCP,EAAA,OAAN,CAAc,GAAd,EAAyB;AAAA;AACvB,UAAI,SAAJ,EAAe;AAEb,QAAA,MAAM,CAAC,QAAP,GAAkB,IAAI,GAAJ,CAAQ,GAAR,EAAa,MAAM,CAAC,QAApB,EAA8B,QAA9B,EAAlB;AACD;AAJsB;AAKxB;;AA1CY,CAAf","sourcesContent":["import { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport invariant from 'fbjs/lib/invariant';\n\nimport { NativeURLListener, URLListener } from './Linking.types';\n\nconst EventTypes = ['url'];\n\nconst listeners: { listener: URLListener; nativeListener: NativeURLListener }[] = [];\n\nexport default {\n  addEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.addEventListener(): ${type} is not a valid event`\n    );\n    const nativeListener: NativeURLListener = nativeEvent =>\n      listener({ url: window.location.href, nativeEvent });\n    listeners.push({ listener, nativeListener });\n    window.addEventListener('message', nativeListener, false);\n  },\n\n  removeEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.removeEventListener(): ${type} is not a valid event.`\n    );\n    const listenerIndex = listeners.findIndex(pair => pair.listener === listener);\n    invariant(\n      listenerIndex !== -1,\n      'Linking.removeEventListener(): cannot remove an unregistered event listener.'\n    );\n    const nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  },\n\n  async canOpenURL(url: string): Promise<boolean> {\n    // In reality this should be able to return false for links like `chrome://` on chrome.\n    return true;\n  },\n\n  async getInitialURL(): Promise<string> {\n    if (!canUseDOM) return '';\n    return window.location.href;\n  },\n\n  async openURL(url: string): Promise<void> {\n    if (canUseDOM) {\n      // @ts-ignore\n      window.location = new URL(url, window.location).toString();\n    }\n  },\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}